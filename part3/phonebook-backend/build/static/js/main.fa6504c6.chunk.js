(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(1),a=n.n(c),u=n(21),s=n.n(u),i=(n(27),n(4)),o=(n(28),n(3)),b=n(8),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",t=Object(c.useState)(""),n=Object(i.a)(t,2),r=n[0],a=n[1],u=function(e){var t=e.target;return a(t.value)},s=function(){return a("")};return{type:e,value:r,onChange:u,reset:s}},j=function(e){var t=e.setFilter,n=f(),c=(n.reset,Object(b.a)(n,["reset"])),a=Object(o.a)(Object(o.a)({},c),{},{onChange:function(e){c.onChange(e),t(e.target.value)}});return Object(r.jsxs)("div",{children:["filter shown with: ",Object(r.jsx)("input",Object(o.a)({},a))]})},d=function(e){var t=e.notify,n=e.submit,c=f(),a=c.reset,u=Object(b.a)(c,["reset"]),s=f(),i=s.reset,j=Object(b.a)(s,["reset"]);return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n({name:u.value,number:j.value}),t({type:"success",message:"Added ".concat(u.value)}),a(),i()},children:[Object(r.jsxs)("label",{children:["name",Object(r.jsx)("input",Object(o.a)({},u))]}),Object(r.jsxs)("label",{children:["number",Object(r.jsx)("input",Object(o.a)({},j))]}),Object(r.jsx)("input",{type:"submit",value:"add"})]})},l=function(e){e.notify;var t=e.id,n=e.name,c=e.number,a=e.deletePerson;return Object(r.jsxs)("div",{children:[n," ",c,Object(r.jsx)("button",{onClick:function(){window.confirm("delete ".concat(n," ?"))&&a(t)},children:"delete"})]},t)},O=function(e){var t=e.notify,n=e.deletePerson,c=e.persons;return Object(r.jsx)("div",{children:c.map((function(e){return Object(r.jsx)(l,Object(o.a)(Object(o.a)({notify:t},e),{},{deletePerson:n}),e.id)}))})},p=function(e){var t=Object(c.useState)(e.visible),n=Object(i.a)(t,2),a=n[0],u=n[1];return Object(c.useEffect)((function(){u(!0)}),[e.message]),setTimeout((function(){return u(!1)}),2e3),a?a&&Object(r.jsx)("div",{className:"notification ".concat(e.type),children:e.message}):null},h=n(5),m=n.n(h),v=n(7),x=n(11),g=n(9),y=n.n(g),w="/api/persons",k=function(){return y.a.get(w)},P=function(){var e=Object(v.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()({url:w,method:"post",data:t,headers:{contentType:"application/json"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y()({url:"".concat(w,"/").concat(t),method:"put",data:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(e){return y()({url:"".concat(w,"/").concat(e),method:"delete"})},C=n(49),E=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),u=Object(i.a)(a,2),s=u[0],b=u[1],f=Object(c.useState)(!1),j=Object(i.a)(f,2),d=j[0],l=j[1];Object(c.useEffect)((function(){k().then((function(e){var t=e.data;g(t)})).catch((function(e){return l(e.message)}))}),[]);var O=n;if(s){var p=RegExp(s,"i");O=n.filter((function(e){return p.test(e.name)}))}else O=n;var h=function(e,t){r((function(n){return n.map((function(n){return n.id===e?t:n}))})),S(e,t)},g=function(e){return r((function(t){return[].concat(Object(x.a)(t),Object(x.a)(e))}))},y=function(){var e=Object(v.a)(m.a.mark((function e(t){var c,a,u,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.name,a=t.number,!n.find((function(e){return e.name===c}))){e.next=5;break}window.confirm("".concat(c," is already added to the phonebook, replace the old number with the new one ?"))&&(u=n.find((function(e){return e.name===c})),h(u.id,Object(o.a)(Object(o.a)({},u),{},{number:a}))),e.next=9;break;case 5:return e.next=7,P({name:c,number:a,id:Object(C.a)()});case 7:s=e.sent,r((function(e){return[].concat(Object(x.a)(e),[s.data])}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=n.find((function(t){return t.id===e}));F(e).catch((function(e){return l("".concat(t.name," has already been removed from server"))})),r(n.filter((function(t){return t.id!==e})))};return{error:d,persons:O,addPerson:y,setFilter:b,deletePerson:w}},T=function(){var e=E(),t=e.error,n=e.persons,a=e.addPerson,u=e.setFilter,s=e.deletePerson,o=Object(c.useState)(!1),b=Object(i.a)(o,2),f=b[0],l=b[1],h=function(e){var t=e.type,n=e.message;l({type:t,message:n})};return Object(c.useEffect)((function(){t&&h({type:"danger",message:t})}),[t]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{type:f.type,message:f.message}),Object(r.jsx)(j,{setFilter:u,children:"test"}),Object(r.jsx)("h2",{children:"add a new"}),Object(r.jsx)(d,{notify:h,submit:a}),Object(r.jsx)("h2",{children:"Numbers"}),t&&Object(r.jsx)("div",{children:t}),Object(r.jsx)(O,{notify:h,deletePerson:s,persons:n})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,u=t.getTTFB;n(e),r(e),c(e),a(e),u(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(T,{})}),document.getElementById("root")),B()}},[[47,1,2]]]);
//# sourceMappingURL=main.fa6504c6.chunk.js.map